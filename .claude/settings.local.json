{
  "permissions": {
    "allow": [
      "WebFetch(domain:github.com)",
      "Bash(npm run build)",
      "Bash(npm install)",
      "Bash(chmod +x /Users/wongderrick/workspaces/remote-agent-sandbox-proxy/scripts/*.sh)",
      "Bash(gcloud config get-value project)",
      "Bash(gcloud artifacts repositories list --format=\"table(name,location,format)\")",
      "Bash(gcloud builds submit --tag us-central1-docker.pkg.dev/agent-sandbox-476202/agent-sandbox/sandbox-proxy:latest .)",
      "Bash(kubectl apply -f k8s/rbac.yaml)",
      "Bash(kubectl apply -f k8s/deployment.yaml)",
      "Bash(kubectl get deployment sandbox-proxy)",
      "Bash(kubectl get service sandbox-proxy)",
      "Bash(kubectl get pods -l app=sandbox-proxy)",
      "Bash(kubectl logs -l app=sandbox-proxy --tail=20)",
      "Bash(curl -s http://34.27.37.121/health)",
      "Bash(python3 -m json.tool)",
      "Bash(curl -s http://34.27.37.121/sandboxes)",
      "Bash(cat ~/.config/gemini-remote-sandbox/config.json)",
      "Bash(curl -s -X POST http://34.27.37.121/default/research-sandbox/execute -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"pwd\"\"\"\"}')",
      "Bash(gcloud builds submit --config cloudbuild.yaml .)",
      "Bash(gcloud artifacts docker images list us-central1-docker.pkg.dev/agent-sandbox-476202/agent-sandbox --include-tags --filter=\"package=sandbox-runtime\")",
      "Bash(gcloud artifacts docker images list us-central1-docker.pkg.dev/agent-sandbox-476202/agent-sandbox --include-tags)",
      "Bash(kubectl get sandbox gemini-test -o json)",
      "Bash(kubectl get pods -l sandbox=gemini-test)",
      "Bash(kubectl describe pod -l sandbox=gemini-test)",
      "Bash(kubectl delete sandbox gemini-test)",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/execute -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini --version\"\"\"\"}')",
      "Bash(kubectl get sandbox gemini-test -o jsonpath='{.status.conditions[?(@.type==\"\"Ready\"\")].status}')",
      "Bash(kubectl logs gemini-test --tail=30)",
      "Bash(kubectl exec gemini-test -- curl -s -X POST http://localhost:8888/execute -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"pwd\"\"}')",
      "Bash(kubectl exec gemini-test -- cat /opt/gem/supervisord/supervisord.python_srv.conf)",
      "Bash(kubectl rollout restart deployment/sandbox-proxy)",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/execute -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"pwd\"\"\"\"}')",
      "Bash(kubectl exec gemini-test -- netstat -tulpn)",
      "Bash(kubectl exec gemini-test -- env)",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8091/execute -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"pwd\"\"\"\"}')",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8091/)",
      "Bash(kubectl exec gemini-test -- supervisorctl status python-server)",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/)",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/api/sandbox/execute -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"pwd\"\"\"\"}')",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/api/sandbox/execute -X POST -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"pwd\"\"}')",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/sandbox/execute -X POST -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"pwd\"\"}')",
      "Bash(kubectl exec gemini-test -- cat /etc/nginx/nginx.conf)",
      "Bash(kubectl exec gemini-test -- find /etc/nginx -name \"*.conf\" -type f)",
      "Bash(kubectl exec gemini-test -- ls -la /etc/nginx/sites-enabled/)",
      "Bash(kubectl exec gemini-test -- cat /etc/nginx/sites-available/default)",
      "Bash(kubectl exec gemini-test -- ls -la /etc/nginx/conf.d/)",
      "Bash(kubectl exec gemini-test -- grep -r 8080 /etc/nginx/)",
      "Bash(kubectl exec gemini-test -- find /opt/gem/supervisord -name \"*.conf\" -exec grep -l \"nginx\" {} ;)",
      "Bash(kubectl exec gemini-test -- cat /opt/gem/supervisord/nginx.conf)",
      "Bash(kubectl exec gemini-test -- cat /opt/gem/nginx-wait.sh)",
      "Bash(kubectl exec gemini-test -- cat /opt/gem/nginx.conf)",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/v1/shell/exec -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"pwd\"\"\"\"}')",
      "Bash(kubectl exec gemini-test -- curl -s http://localhost:8080/v1/shell/exec -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini --version\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini --version\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini -p \\\"\"\"\"say hello\\\"\"\"\"\"\"\"\"}')",
      "Bash(kubectl exec gemini-test -- sh -c 'echo $GOOGLE_GENAI_USE_VERTEXAI')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"export GOOGLE_GENAI_USE_VERTEXAI=1 && gemini -p \\\"\"\"\"say hello\\\"\"\"\"\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"env | grep GOOGLE\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini config list\"\"\"\"}')",
      "Bash(gcloud projects describe agent-sandbox-476202 --format=\"value(projectNumber)\")",
      "Bash(gcloud projects add-iam-policy-binding agent-sandbox-476202 )",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"mkdir -p ~/.gemini && echo {\\\\\\\"\"\"\"auth\\\\\\\"\"\"\":{\\\\\\\"\"\"\"provider\\\\\\\"\"\"\":\\\\\\\"\"\"\"vertexai\\\\\\\"\"\"\",\\\\\\\"\"\"\"projectId\\\\\\\"\"\"\":\\\\\\\"\"\"\"agent-sandbox-476202\\\\\\\"\"\"\",\\\\\\\"\"\"\"location\\\\\\\"\"\"\":\\\\\\\"\"\"\"us-central1\\\\\\\"\"\"\"}} > ~/.gemini/settings.json && cat ~/.gemini/settings.json\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"mkdir -p ~/.gemini && cat > ~/.gemini/settings.json << '\"\"'\\\"\"\"\"'EOF'\\\"\"\"\"'\"\"'\\n{\\\"\"\"\"auth\\\"\"\"\":{\\\"\"\"\"provider\\\"\"\"\":\\\"\"\"\"vertexai\\\"\"\"\",\\\"\"\"\"projectId\\\"\"\"\":\\\"\"\"\"agent-sandbox-476202\\\"\"\"\",\\\"\"\"\"location\\\"\"\"\":\\\"\"\"\"us-central1\\\"\"\"\"}}\\nEOF\\ncat ~/.gemini/settings.json\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d \"{\"\"command\"\": \"\"mkdir -p ~/.gemini && printf ''''{\"\"\"auth\"\"\":{\"\"\"provider\"\"\":\"\"\"vertexai\"\"\",\"\"\"projectId\"\"\":\"\"\"agent-sandbox-476202\"\"\",\"\"\"location\"\"\":\"\"\"us-central1\"\"\"}}'''' > ~/.gemini/settings.json && cat ~/.gemini/settings.json\"\"}\")",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"ls -la ~/.gemini/\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"cat ~/.gemini/settings.json | python3 -m json.tool\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"gemini -p \\\"\"\"\"say hello\\\"\"\"\" 2>&1\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"\"\"command\"\"\"\": \"\"\"\"ls -la /home/gem/.gemini/settings.json && whoami\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini -p \\\"\"say hello\\\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"env | grep GOOGLE\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini config list\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"mkdir -p ~/.gemini && cat > ~/.gemini/settings.json << '''EOFJSON'''\\n{\\\"\"auth\\\"\":{\\\"\"provider\\\"\":\\\"\"vertexai\\\"\",\\\"\"projectId\\\"\":\\\"\"agent-sandbox-476202\\\"\",\\\"\"location\\\"\":\\\"\"global\\\"\"}}\\nEOFJSON\\ncat ~/.gemini/settings.json\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"whoami && pwd && ls -la ~/.gemini/\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"cat ~/.gemini/settings.json | python3 -m json.tool\"\"}')",
      "Bash(kubectl get pod -l sandbox=gemini-test -o jsonpath='{.items[0].spec.serviceAccountName}')",
      "Bash(kubectl get serviceaccount default -o yaml)",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"curl -H \\\"\"Metadata-Flavor: Google\\\"\" http://metadata.google.internal/computeMetadata/v1/instance/service-accounts/default/email\"\"}')",
      "Bash(gcloud iam service-accounts create gemini-sandbox-sa --display-name=\"Gemini Sandbox Service Account\")",
      "Bash(gcloud projects add-iam-policy-binding agent-sandbox-476202 --member=\"serviceAccount:gemini-sandbox-sa@agent-sandbox-476202.iam.gserviceaccount.com\" --role=\"roles/aiplatform.user\")",
      "Bash(gcloud iam service-accounts add-iam-policy-binding gemini-sandbox-sa@agent-sandbox-476202.iam.gserviceaccount.com --role roles/iam.workloadIdentityUser --member \"serviceAccount:agent-sandbox-476202.svc.id.goog[default/default]\")",
      "Bash(kubectl annotate serviceaccount default iam.gke.io/gcp-service-account=gemini-sandbox-sa@agent-sandbox-476202.iam.gserviceaccount.com)",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"curl -s http://localhost:8080/mcp || echo \\\"\"MCP endpoint check failed\\\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini mcp list\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini mcp tools sandbox\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini -p \\\"\"list the available tools you have access to\\\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"curl -X POST http://localhost:8080/mcp -H \\\"\"Content-Type: application/json\\\"\" -d ''''{\\\"\"jsonrpc\\\"\":\\\"\"2.0\\\"\",\\\"\"method\\\"\":\\\"\"initialize\\\"\",\\\"\"id\\\"\":1}'''' 2>&1\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"curl -s http://localhost:8080/ 2>&1 | head -20\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"cat /root/.gemini/settings.json\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"gemini -p \\\"\"list all the tools\\\"\"\"\"}')",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"whoami\"\"}')",
      "Bash(gcloud builds log 75e91692-f3c7-4b45-975d-280bb0a8231f)",
      "Bash(curl -s -X POST http://34.27.37.121/default/gemini-test/v1/shell/exec -H \"Content-Type: application/json\" -d '{\"\"command\"\": \"\"mkdir -p ~/.gemini && cat > ~/.gemini/settings.json << '''EOFJSON'''\\n{\\n  \\\"\"mcpServers\\\"\": {\\n    \\\"\"sandbox\\\"\": {\\n      \\\"\"httpUrl\\\"\": \\\"\"http://localhost:8080/mcp\\\"\",\\n      \\\"\"args\\\"\": []\\n    }\\n  }\\n}\\nEOFJSON\\ncat ~/.gemini/settings.json\"\"}')",
      "Bash(node build/remote-sandbox.js)",
      "Bash(node --check dist/remote-sandbox.js)",
      "Bash(timeout 5 node dist/remote-sandbox.js)",
      "Bash(echo \"Exit code: $?\")",
      "Bash(cat ~/.gemini/extensions/gke-mcp/gemini-extension.json)"
    ],
    "deny": [],
    "ask": []
  }
}
